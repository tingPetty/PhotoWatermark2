# PhotoWatermark2 产品需求文档 (PRD)

## 1. 产品概述

PhotoWatermark2是一个本地运行的图片水印处理应用程序，专为Windows平台设计。该应用程序允许用户为单张或批量图片添加文本或图片水印，并提供丰富的自定义选项。

## 2. 功能需求

### 2.1 文件处理功能

#### 2.1.1 图片导入
- **单张导入**
  - 支持拖拽导入
  - 支持文件选择器导入
- **批量导入**
  - 支持多选图片导入
  - 支持整个文件夹导入
- **导入列表显示**
  - 显示缩略图
  - 显示文件名
  - 支持列表管理（选择、删除等）

#### 2.1.2 支持的图片格式
- **输入格式**
  - 必需格式：
    - JPEG
    - PNG（支持透明通道）
  - 建议格式：
    - BMP
    - TIFF
- **输出格式**
  - JPEG
  - PNG

#### 2.1.3 导出功能
- **基础导出功能**
  - 指定输出文件夹（默认禁止导出到原文件夹）
  - 文件命名规则：
    - 保留原文件名
    - 添加自定义前缀
    - 添加自定义后缀
- **高级导出功能**（可选）
  - JPEG质量调节（0-100滑块）
  - 图片尺寸调整
    - 按宽度调整
    - 按高度调整
    - 按百分比缩放

### 2.2 水印功能

#### 2.2.1 文本水印
- **基础功能**
  - 自定义文本输入
  - 透明度调节（0-100%）
- **高级功能**（可选）
  - 字体设置
    - 系统字体选择
    - 字号调节
    - 粗体/斜体选项
  - 颜色选择（调色板）
  - 样式效果
    - 阴影效果
    - 描边效果

#### 2.2.2 图片水印（可选高级功能）
- **图片选择**
  - 本地图片选择
  - 支持PNG透明通道
- **水印调整**
  - 比例缩放
  - 自由调整大小
  - 透明度调节（0-100%）

### 2.3 水印布局与样式

#### 2.3.1 预览功能
- 实时预览水印效果
- 支持切换预览不同图片
- 预览窗口大小自适应

#### 2.3.2 位置调整
- **预设位置**
  - 九宫格布局选择
  - 四角位置快速选择
  - 居中位置选择
- **自由位置**
  - 鼠标拖拽定位
  - 坐标微调

#### 2.3.3 旋转功能（可选高级功能）
- 角度滑块调节
- 精确角度输入
- 快速角度预设（0°, 90°, 180°, 270°）

### 2.4 配置管理

#### 2.4.1 水印模板
- **模板保存**
  - 保存当前所有水印设置
  - 模板命名功能
- **模板管理**
  - 加载已保存模板
  - 编辑现有模板
  - 删除模板
- **启动配置**
  - 保存上次关闭时的设置
  - 加载默认模板选项

## 3. 非功能需求

### 3.1 性能需求
- 图片导入响应时间 < 1秒
- 水印预览实时更新 < 0.5秒
- 批量处理时显示进度条
- 内存占用合理，避免内存泄漏

### 3.2 兼容性需求
- 支持Windows 10及以上版本
- 适配不同屏幕分辨率
- 支持高DPI显示

### 3.3 用户体验需求
- 界面简洁直观
- 操作流程清晰
- 提供必要的用户引导
- 错误提示友好清晰

### 3.4 安全性需求
- 确保不损坏原始图片
- 防止意外覆盖原文件
- 异常处理机制完善

## 4. 发布规划

### 4.1 基础版本（v1.0）
- 完成所有基础功能
- 确保核心功能稳定可用
- 基本用户界面实现

### 4.2 完整版本（v2.0）
- 实现所有高级功能
- 优化用户界面和体验
- 完善错误处理机制

### 4.3 发布要求
- 提供可直接下载运行的Windows可执行文件
- 打包为独立的release版本
- 确保程序可以正常运行
- 提供基本的用户指南